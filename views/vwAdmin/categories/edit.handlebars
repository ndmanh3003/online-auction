{{#> admin-management-layout activeMenu='categories'}}
  <div class="mb-8">
    <div class="flex justify-between items-center mb-2">
      <h1 class="text-[36px] font-semibold text-gray-900">Edit Category</h1>
    </div>
    <a href="javascript:history.back();" class="text-gray-600 hover:text-gray-900 transition-colors">‚Üê Back</a>
  </div>
  <div class="bg-white rounded-3xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-200/60 p-8">
    <form method="post" action="/admin/categories/{{category._id}}">
      <input type="hidden" name="_method" value="PUT">
      <div class="relative mb-6">
        <label for="parentId" class="block text-sm font-medium text-gray-900 mb-2">Parent Category (Optional)</label>
        <select
          id="parentId"
          name="parentId"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900 bg-white"
        >
          <option value="" {{#unless category.parentId}}selected{{/unless}}>
            None (Top-level category)
          </option>
          {{#each drpdwnParents}}
            <option value="{{value}}" {{#if (eq ../category.parentId._id value)}}selected{{/if}}>
              {{label}}
            </option>
          {{/each}}
        </select>
        <p class="mt-2 text-sm text-gray-500">Leave empty to make this a top-level category. Select a parent to make it a subcategory.</p>
      </div>
      <div class="relative mb-6">
        <label for="name" class="block text-sm font-medium text-gray-900 mb-2">Category Name</label>
        <input
          type="text"
          id="name"
          name="name"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
          placeholder="Enter category name"
          value="{{category.name}}"
          required
        />
      </div>
      <div class="relative mb-6">
        <label for="img_url" class="block text-sm font-medium text-gray-900 mb-2">Image URL</label>
        <input
          type="url"
          id="img_url"
          name="img_url"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
          placeholder="https://example.com/image.jpg"
          value="{{category.img_url}}"
        />
      </div>
      <div class="relative mb-6">
        <label for="description" class="block text-sm font-medium text-gray-900 mb-2">Description</label>
        <textarea
          id="description"
          name="description"
          rows="4"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900 resize-none"
          placeholder="Enter category description (optional)"
        >{{category.description}}</textarea>
      </div>
      <div class="flex justify-end">
        <button
          type="submit"
          class="px-6 py-2 bg-blue-600 text-white rounded-xl shadow-[0_4px_20px_rgba(37,99,235,0.3)] hover:bg-blue-700 hover:scale-105 hover:shadow-lg transition-all duration-300 ease-out font-medium"
        >
          Update
        </button>
      </div>
    </form>
  </div>
{{/admin-management-layout}}