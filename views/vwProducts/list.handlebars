<div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12'>
  <div class='mb-8'>
    <h1 class='text-[36px] font-semibold text-gray-900 mb-6'>Products</h1>
    <form
      method='get'
      action='/products'
      class='bg-white rounded-3xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-200/60 p-6'
    >
      <div class='grid grid-cols-1 md:grid-cols-4 gap-4'>
        <div class='md:col-span-2'>
          <input
            type='text'
            name='q'
            value='{{req.query.q}}'
            class='w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900'
            placeholder='Search products...'
          />
        </div>
        <div>
          {{> category-dropdown
            id='categoryId'
            name='categoryId'
            placeholder='All Categories'
            selectedValue=req.query.categoryId
          }}
        </div>
        <div>
          <select
            name='sortBy'
            class='w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900 bg-white'
          >
            <option value='' {{#unless req.query.sortBy}}selected{{/unless}}>Sort By:
              Newest</option>
            <option
              value='endTime_asc'
              {{#if (eq req.query.sortBy 'endTime_asc')}}selected{{/if}}
            >Ending Soon</option>
            <option
              value='currentPrice_asc'
              {{#if (eq req.query.sortBy 'currentPrice_asc')}}selected{{/if}}
            >Price: Low to High</option>
          </select>
        </div>
      </div>
      <div class='mt-4'>
        <button
          type='submit'
          class='px-6 py-3 bg-blue-600 text-white rounded-xl shadow-[0_4px_20px_rgba(37,99,235,0.3)] hover:bg-blue-700 hover:scale-105 hover:shadow-lg transition-all duration-300 ease-out font-medium'
        >
          Search
        </button>
      </div>
    </form>
  </div>
  {{#if items.length}}
    <div class='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8'>
      {{#each items}}
        {{> product-card}}
      {{/each}}
    </div>
    {{{pagination pagination.page pagination.totalPages pagination.total}}}
  {{else}}
    <div
      class='bg-white rounded-3xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-200/60 p-12 text-center'
    >
      <i class='fas fa-search text-gray-400 text-6xl mb-4'></i>
      <p class='text-gray-600 text-lg'>No products found.</p>
    </div>
  {{/if}}
</div>

