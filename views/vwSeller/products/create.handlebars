<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
  <div class="mb-8">
    <h1 class="text-[36px] font-semibold text-gray-900">Create New Product</h1>
  </div>
  <div class="bg-white rounded-3xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] border border-gray-200/60 p-8">
    <form
      method="post"
      action="/seller/products/create"
      class="space-y-6"
      id="createProductForm"
    >
      <div class="relative mb-6">
        <label for="name" class="block text-sm font-medium text-gray-900 mb-2">Product Name</label>
        <input
          type="text"
          id="name"
          name="name"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
          placeholder="Enter product name"
          required
        />
      </div>
      <div class="relative mb-6">
        <label for="categoryId" class="block text-sm font-medium text-gray-900 mb-2">Category</label>
        <select
          id="categoryId"
          name="categoryId"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900 bg-white"
          required
        >
          <option value="">Select Category</option>
          {{#each categories}}
            <option value="{{_id}}">{{name}}</option>
            {{#each subcategories}}
              <option value="{{_id}}">&nbsp;&nbsp;{{name}}</option>
            {{/each}}
          {{/each}}
        </select>
      </div>
      <div class="relative mb-6">
        <label for="images" class="block text-sm font-medium text-gray-900 mb-2">Images (min 3, comma-separated URLs)</label>
        <textarea
          id="images"
          name="images"
          rows="3"
          class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
          placeholder="Enter image URLs separated by commas"
          required
        ></textarea>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div class="relative mb-6">
          <label for="startPrice" class="block text-sm font-medium text-gray-900 mb-2">Start Price ($)</label>
          <input
            type="number"
            id="startPrice"
            name="startPrice"
            min="0"
            step="0.01"
            class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
            placeholder="0.00"
            required
          />
        </div>
        <div class="relative mb-6">
          <label for="stepPrice" class="block text-sm font-medium text-gray-900 mb-2">Step Price ($)</label>
          <input
            type="number"
            id="stepPrice"
            name="stepPrice"
            min="0"
            step="0.01"
            class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
            placeholder="0.00"
            required
          />
        </div>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div class="relative mb-6">
          <label for="buyNowPrice" class="block text-sm font-medium text-gray-900 mb-2">Buy Now Price (Optional)</label>
          <input
            type="number"
            id="buyNowPrice"
            name="buyNowPrice"
            min="0"
            step="0.01"
            class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
            placeholder="0.00"
          />
        </div>
        <div class="relative mb-6">
          <label for="duration" class="block text-sm font-medium text-gray-900 mb-2">Duration (days)</label>
          <input
            type="number"
            id="duration"
            name="duration"
            min="1"
            max="30"
            class="w-full px-4 py-4 border border-gray-200/60 rounded-2xl focus:ring-2 focus:ring-black/10 focus:outline-none transition-all duration-300 text-gray-900"
            placeholder="7"
            value="7"
            required
          />
        </div>
      </div>
      <div class="relative mb-6">
        <label for="description" class="block text-sm font-medium text-gray-900 mb-2">Description</label>
        <div
          id="editor"
          class="bg-white border border-gray-200/60 rounded-2xl"
          style="min-height: 300px;"
        ></div>
        <input type="hidden" id="description" name="description" />
      </div>
      <div class="flex items-center gap-4 mb-6">
        <label class="flex items-center cursor-pointer">
          <input
            type="checkbox"
            name="autoExtend"
            class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
          />
          <span class="ml-2 text-gray-900">Enable Auto-Extend</span>
        </label>
      </div>
      <div class="flex items-center gap-4 mb-6">
        <label class="flex items-center cursor-pointer">
          <input
            type="checkbox"
            name="allowNonRatedBidders"
            class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"
            checked
          />
          <span class="ml-2 text-gray-900">Allow bidders without ratings</span>
        </label>
      </div>
      <button
        type="submit"
        class="w-full px-6 py-4 bg-blue-600 text-white rounded-xl shadow-[0_4px_20px_rgba(37,99,235,0.3)] hover:bg-blue-700 hover:scale-105 hover:shadow-lg transition-all duration-300 ease-out font-medium"
      >
        Create Product
      </button>
    </form>
  </div>
</div>
{{#section "css"}}
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
{{/section}}
{{#section "js"}}
  <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
    var quill = new Quill('#editor', {
      theme: 'snow',
      placeholder: 'Enter detailed product description...',
      modules: {
        toolbar: [
          [{ 'header': [1, 2, 3, false] }],
          ['bold', 'italic', 'underline', 'strike'],
          [{ 'list': 'ordered'}, { 'list': 'bullet' }],
          [{ 'color': [] }, { 'background': [] }],
          [{ 'align': [] }],
          ['link', 'image'],
          ['clean']
        ]
      }
    });
    
    var form = document.getElementById('createProductForm');
    form.onsubmit = function(e) {
      var descriptionInput = document.getElementById('description');
      var content = quill.root.innerHTML;
      var text = quill.getText().trim();
      
      if (!text || text === '' || content === '<p><br></p>') {
        e.preventDefault();
        alert('Please enter a product description');
        return false;
      }
      
      descriptionInput.value = content;
      return true;
    };
  </script>
{{/section}}
